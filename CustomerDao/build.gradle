apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'eclipse-wtp'

import org.gradle.plugins.ide.eclipse.model.SourceFolder

project.buildDir = file('bin') 

eclipse {
	classpath {
		defaultOutputDir =  file('bin/classes')
		file.whenMerged { cp ->
	    	cp.entries.findAll { it instanceof SourceFolder && it.path.startsWith("src/test/") }*.output = 'bin/test-classes'
		}
	}
 	wtp {
	    component {
	          //you can configure the context path:
		     }
    facet {
        facet name: 'jst.web', version: '2.5'
        facet name: 'java', version: '1.7'
        facet name: 'wst.jsdt.web', version: '1.0'
    }
  }
 }



jar {
    manifest {
        attributes("Implementation-Title": "TomEE example project", "Implementation-Version": 1.0)
    }
}

repositories {
       mavenCentral()
}

task wrapper(type: Wrapper) {
    gradleVersion = '1.11'
}


sourceSets {
	main {
		java {
			srcDirs += 'src/main/webapp'
		}
	}
}

dependencies {
	compile group: 'org.apache.openejb', name: 'javaee-api', version: '6.0-5'
	testRuntime group: 'org.apache.openejb', name: 'arquillian-tomee-embedded', version: '1.6.0'
	testCompile group: 'junit', name: 'junit', version: '4.11'
}